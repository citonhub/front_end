(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{726:function(t,e,o){"use strict";o.r(e);var i={props:["screenType","playerHeight","video"],data:function(){return{videoScr:"",player:void 0,that:this,showDescription:!1,loadingVideo:!1}},mounted:function(){this.$root.YoutubeComponent=this,this.loadVideoData(!0)},computed:{playerState:function(){}},watch:{playerState:function(t,e){}},methods:{loadVideoData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.loadingVideo=!0,axios.post("/get-video-data",{videoId:this.$root.playingYoutubeVideo.content.id,resourceContentId:this.$root.playingYoutubeVideo.id,video_channel_id:this.$root.playingYoutubeVideo.content.snippet.channelId}).then((function(i){200==i.status&&(t.$root.playingYoutubeVideo.content=i.data.video_data,t.$root.playingVideoSubState=i.data.subscription_state,t.$root.playingVideoRating=i.data.video_ratings,t.$root.playVideoAuthState=i.data.userIsAuth,e?t.setVideoData():t.player.loadVideoById(o),t.loadingVideo=!1)})).catch((function(e){t.loadingVideo=!1}))},subscribeToChannel:function(){var t=this;this.$root.checkIfUserIsLoggedIn(),this.$root.youtube_connected?(this.$root.playingVideoSubState="subscribed",axios.post("/subscribe-toChannel",{channelId:this.$root.playingYoutubeVideo.content.snippet.channelId}).then((function(t){t.status})).catch((function(e){t.loadingVideo=!1}))):(this.$root.showYoutubePlayer=!1,this.$root.showYoutubePlayerSm=!1,this.$router.push({path:"/channels/"+this.$root.selectedSpace.space_id+"/youtube_auth"}))},rateVideo:function(t){this.$root.checkIfUserIsLoggedIn(),this.$root.youtube_connected?("like"!=this.$root.playingVideoRating&&"dislike"!=this.$root.playingVideoRating||(t="none"),this.$root.playingVideoRating=t,axios.post("/rate-video",{videoId:this.$root.playingYoutubeVideo.content.id,type:t}).then((function(t){t.status})).catch((function(t){}))):(this.$root.showYoutubePlayer=!1,this.$root.showYoutubePlayerSm=!1,this.$router.push({path:"/channels/"+this.$root.selectedSpace.space_id+"/youtube_auth"}))},preventClose:function(){},convertDigit:function(t,e){var o,i=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}];for(o=i.length-1;o>0&&!(t>=i[o].value);o--);return(t/i[o].value).toFixed(e).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+i[o].symbol},setVideoData:function(){var t=this,e=document.createElement("script");e.id="iframe-youtube",e.src="https://www.youtube.com/iframe_api";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(e,o);var i=null;i=setInterval((function(){null==t.player?t.player=new YT.Player("YTplayer"+t.screenType,{events:{onReady:t.onPlayerReady,onStateChange:t.onPlayerStateChange}}):clearInterval(i)}),3e3)},playerAction:function(t){var e=null,o=0;"next"==t?(e=this.$root.nextResourceData,o=this.$root.nextResourceId):(e=this.$root.prevResourceData,o=this.$root.prevResourceId),this.$root.playingYoutubeVideo=e,this.$root.playingYoutubeVideoId=e.content.id,"youtube_video"==e.type&&(null==this.player?this.player=new YT.Player("YTplayer"+this.screenType,{events:{onReady:this.onPlayerReady,onStateChange:this.onPlayerStateChange}}):this.loadVideoData(!1,e.content.id)),this.$root.resourceComponent.handleResource(e,o)},onPlayerReady:function(t){this.player.playVideo()},onPlayerStateChange:function(t){-1==t.data&&this.player.playVideo()}}},n=o(4),a=Object(n.a)(i,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{background:"white"},on:{click:function(e){return e.stopPropagation(),t.preventClose()}}},[o("v-btn",{staticClass:"d-lg-inline-flex d-none",staticStyle:{position:"absolute",background:"#3C87CD","margin-top":"-24px",left:"2%","z-index":"999999999999"},attrs:{icon:"",color:"#ffffff"},on:{click:function(e){t.that.$root.showYoutubePlayer=!1,t.that.$root.showYoutubePlayerTemp=!1}}},[o("v-icon",[t._v("mdi-close mdi-18px")])],1),t._v(" "),o("v-btn",{staticClass:"d-block-flex d-lg-none",staticStyle:{position:"absolute",background:"#3C87CD","margin-top":"4px",left:"4px","z-index":"999999999999"},attrs:{icon:"",color:"#ffffff"},on:{click:function(e){t.that.$root.showYoutubePlayerSm=!1,t.that.$root.showYoutubePlayerTemp=!1}}},[o("v-icon",[t._v("mdi-close mdi-18px")])],1),t._v(" "),t.loadingVideo?[o("div",{staticClass:"d-flex flex-row",style:"height:"+t.playerHeight+"px;  background:white; align-items:center;justify-content:center;"},[o("v-progress-circular",{attrs:{color:"#3C87CD",indeterminate:"",width:"3",size:"25"}})],1)]:[o("iframe",{staticStyle:{"z-index":"99999999999999999"},attrs:{id:"YTplayer"+t.screenType,allowfullscreen:"allowfullscreen",mozallowfullscreen:"mozallowfullscreen",msallowfullscreen:"msallowfullscreen",oallowfullscreen:"oallowfullscreen",webkitallowfullscreen:"webkitallowfullscreen",type:"text/html",width:"100%",height:t.playerHeight,src:"https://www.youtube.com/embed/"+t.that.$root.playingYoutubeVideo.content.id+"?enablejsapi=1&rel=0",frameborder:"0"},on:{click:function(e){return e.stopPropagation(),t.preventClose()}}}),t._v(" "),o("div",{staticClass:"col-12 px-2 py-1 d-flex flex-column",staticStyle:{background:"white"}},[o("div",{staticClass:"d-flex flex-row",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{"font-family":"MediumFont","font-size":"14px","text-align":"left"}},[t._v("\n               "+t._s(t.that.$root.playingYoutubeVideo.content.snippet.title)+"\n          ")]),t._v(" "),o("div",{staticClass:"ml-auto"},[o("v-btn",{attrs:{small:"",icon:""},on:{click:function(e){t.showDescription?t.showDescription=!1:t.showDescription=!0}}},[t.showDescription?t._e():o("v-icon",{staticStyle:{"font-size":"20px"}},[t._v("mdi mdi-menu-down")]),t._v(" "),t.showDescription?o("v-icon",{staticStyle:{"font-size":"20px"}},[t._v("mdi mdi-menu-up")]):t._e()],1)],1)]),t._v(" "),o("div",{staticClass:"col-12 text-left py-0 px-0",staticStyle:{"font-family":"BodyFont","font-size":"12px","white-space":"nowrap",color:"grey"}},[t._v("\n                "+t._s(t.convertDigit(t.that.$root.playingYoutubeVideo.content.statistics.viewCount,1))+" views\n           ")]),t._v(" "),o("div",{staticClass:" d-flex flex-row",staticStyle:{"align-items":"center"}},[o("div",{staticClass:"col-6 py-0 px-0 text-left",staticStyle:{"font-family":"BodyFont","font-size":"12px","white-space":"nowrap",color:"grey"}},[t._v("\n               "+t._s(t.that.$root.playingYoutubeVideo.content.snippet.channelTitle)+"\n           ")]),t._v(" "),o("div",{staticClass:"col-6 py-0 text-right px-0"},["subscribed"==t.that.$root.playingVideoSubState?[o("v-btn",{staticStyle:{"font-family":"BodyFont","font-size":"12px","white-space":"nowrap",color:"grey"},attrs:{text:"",disabled:""}},[t._v(" SUBSCRIBED")])]:[o("v-btn",{staticStyle:{"font-family":"BodyFont","font-size":"12px","white-space":"nowrap",color:"red"},attrs:{text:"",color:"red"},on:{click:function(e){return t.subscribeToChannel()}}},[t._v(" SUBSCRIBE")])]],2)]),t._v(" "),o("div",{staticClass:"d-flex flex-row",staticStyle:{"align-items":"center"}},[o("div",{staticClass:"col-3 py-1 d-flex flex-column",staticStyle:{"font-family":"BodyFont","font-size":"11px","align-items":"center","justify-content":"center"}},[o("div",[o("v-btn",{attrs:{icon:"",disabled:this.$root.prevResourceId<0},on:{click:function(e){return e.stopPropagation(),t.playerAction("prev")}}},[o("v-icon",{staticStyle:{"font-size":"23px"}},[t._v("las la-arrow-left")])],1)],1),t._v(" "),o("div",[t._v("\n               Prev\n             ")])]),t._v(" "),o("div",{staticClass:"col-3 d-flex py-1 flex-column",staticStyle:{"font-family":"BodyFont","font-size":"11px","align-items":"center","justify-content":"center"}},[o("div",[o("v-btn",{attrs:{icon:""},on:{click:function(e){return t.rateVideo("like")}}},[o("v-icon",{staticStyle:{"font-size":"23px"},attrs:{color:"like"==t.that.$root.playingVideoRating?"#FF0000":""}},[t._v("las la-thumbs-up")])],1)],1),t._v(" "),o("div",[t._v("\n                "+t._s(t.convertDigit(t.that.$root.playingYoutubeVideo.content.statistics.likeCount,1))+" \n             ")])]),t._v(" "),o("div",{staticClass:"col-3  d-flex py-1 flex-column",staticStyle:{"font-family":"BodyFont","font-size":"11px","align-items":"center","justify-content":"center"}},[o("div",[o("v-btn",{attrs:{icon:""},on:{click:function(e){return t.rateVideo("unlike")}}},[o("v-icon",{staticStyle:{"font-size":"23px"},attrs:{color:"dislike"==t.that.$root.playingVideoRating?"#FF0000":""}},[t._v("las la-thumbs-down")])],1)],1),t._v(" "),o("div",[t._v("\n                "+t._s(t.convertDigit(t.that.$root.playingYoutubeVideo.content.statistics.dislikeCount,1))+" \n             ")])]),t._v(" "),o("div",{staticClass:"col-3 py-1 d-flex flex-column",staticStyle:{"font-family":"BodyFont","font-size":"12px","align-items":"center","justify-content":"center"}},[o("div",[o("v-btn",{attrs:{icon:"",disabled:null==this.$root.nextResourceId},on:{click:function(e){return e.stopPropagation(),t.playerAction("next")}}},[o("v-icon",{staticStyle:{"font-size":"23px"}},[t._v("las la-arrow-right")])],1)],1),t._v(" "),o("div",[t._v("\n               Next\n             ")])])]),t._v(" "),t.showDescription?o("div",{staticClass:"col-12 text-left px-0",staticStyle:{"font-family":"BodyFont","font-size":"13px"}},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.that.$root.playingYoutubeVideo.content.snippet.description,expression:"that.$root.playingYoutubeVideo.content.snippet.description"}],staticClass:"col-12 mt-0 mt-md-1",staticStyle:{height:"250px"},attrs:{readonly:""},domProps:{value:t.that.$root.playingYoutubeVideo.content.snippet.description},on:{input:function(e){e.target.composing||t.$set(t.that.$root.playingYoutubeVideo.content.snippet,"description",e.target.value)}}})]):t._e()])]],2)}),[],!1,null,"9148ac56",null);e.default=a.exports}}]);