(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{357:function(t,e,o){var s=o(646);"string"==typeof s&&(s=[[t.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};o(25)(s,i);s.locals&&(t.exports=s.locals)},645:function(t,e,o){"use strict";var s=o(357);o.n(s).a},646:function(t,e,o){(t.exports=o(24)(!1)).push([t.i,"\n.textareaLg[data-v-565fc84d]{\n    font-size:13px; \n    background:whitesmoke;\n    width:100%; \n    height: 55px;\n    padding: 4px 6px;\n    resize:none; \n    overflow-x: hidden;\n     overflow-y: auto;\n    border:1px solid #e6e6e6; \n    border-radius:2px;\n}\n.textareaSm[data-v-565fc84d] {\n    font-size:13px; \n    background:whitesmoke;\n    width:100%; \n   \n    padding: 4px 6px;\n    resize:none; \n    overflow-x: hidden;\n     overflow-y: auto;\n    border:1px solid #e6e6e6; \n    border-radius:2px;\n}\n",""])},752:function(t,e,o){"use strict";o.r(e);var s=function(t,e,o,s,i,n,r,a,c,d){"boolean"!=typeof r&&(c=a,a=r,r=!1);var h,l="function"==typeof o?o.options:o;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),s&&(l._scopeId=s),n?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(n)},l._ssrRegister=h):e&&(h=r?function(){e.call(this,d(this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),h)if(l.functional){var u=l.render;l.render=function(t,e){return h.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,h):[h]}return o}({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("textarea",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],style:t.computedStyles,domProps:{value:t.val},on:{focus:t.resize,input:function(e){e.target.composing||(t.val=e.target.value)}}})},staticRenderFns:[]},void 0,{name:"TextareaAutosize",props:{value:{type:[String,Number],default:""},autosize:{type:Boolean,default:!0},minHeight:{type:[Number],default:null},maxHeight:{type:[Number],default:null},important:{type:[Boolean,Array],default:!1}},data:function(){return{val:null,maxHeightScroll:!1,height:"auto"}},computed:{computedStyles:function(){return this.autosize?{resize:this.isResizeImportant?"none !important":"none",height:this.height,overflow:this.maxHeightScroll?"auto":this.isOverflowImportant?"hidden !important":"hidden"}:{}},isResizeImportant:function(){var t=this.important;return!0===t||Array.isArray(t)&&t.includes("resize")},isOverflowImportant:function(){var t=this.important;return!0===t||Array.isArray(t)&&t.includes("overflow")},isHeightImportant:function(){var t=this.important;return!0===t||Array.isArray(t)&&t.includes("height")}},watch:{value:function(t){this.val=t},val:function(t){this.$nextTick(this.resize),this.$emit("input",t)},minHeight:function(){this.$nextTick(this.resize)},maxHeight:function(){this.$nextTick(this.resize)},autosize:function(t){t&&this.resize()}},methods:{resize:function(){var t=this,e=this.isHeightImportant?"important":"";return this.height="auto".concat(e?" !important":""),this.$nextTick((function(){var o=t.$el.scrollHeight+1;t.minHeight&&(o=o<t.minHeight?t.minHeight:o),t.maxHeight&&(o>t.maxHeight?(o=t.maxHeight,t.maxHeightScroll=!0):t.maxHeightScroll=!1);var s=o+"px";t.height="".concat(s).concat(e?" !important":"")})),this}},created:function(){this.val=this.value},mounted:function(){this.resize()}},void 0,!1,void 0,void 0,void 0),i={install:function(t){t.component("TextareaAutosize",s)},version:"1.1.1"};"undefined"!=typeof window&&window.Vue&&window.Vue.use(i);var n=i;Vue.use(n);var r={props:["screenType"],data:function(){return{wordCount:0,showSend:!1,audioChunks:[],Alert:!0,typingText:"",content:this.$root.postContent,alertMsg:"",recording:!1,audioBlob:"",mediaRecorder:null,contentInWord:"",NewMsg:"",input:"",timer:"0:00",shiftIsPressed:!1,showAttachment:!0,seconds:0,minute:0,recorderInterval:null}},components:{},mounted:function(){this.$root.bottomEditorValue=this.$refs.textBottom.$el,this.$root.channelBottomComp=this},computed:{compiledMarkdown:function(){var t=new marked.Renderer;return t.link=function(t,e,o){return marked.Renderer.prototype.link.call(this,t,e,o).replace("<a","<a target='_blank' ")},marked.setOptions({renderer:t}),marked(this.input,{sanitize:!0})}},methods:{showShareBoard:function(){this.$router.push({path:"/channels/"+this.$root.selectedSpace.space_id+"/share"})},reFocusEditor:function(){this.$refs.textBottom.$el.focus()},toggleEmoji:function(){this.$root.showEmojiBox?this.$root.showEmojiBox=!1:this.$root.showEmojiBox=!0},handelkeyAct:function(t){16==t.keyCode&&(this.shiftIsPressed=!0),16!=t.keyCode&&13!=t.keyCode&&(this.shiftIsPressed=!1),13==t.keyCode&&this.shiftIsPressed&&(t.preventDefault(),this.sendMessage(),this.shiftIsPressed=!1)},shareHandler:function(){this.$root.sharePage=!0,this.$root.showChatBottom=!1},update:function(t){this.wordCount=this.input.length,this.wordCount>0?(this.showSend=!0,this.$root.showCodeboxBtn=!1,this.isTyping()):(this.showSend=!1,this.$root.showCodeboxBtn=!0),this.contentInWord=this.compiledMarkdown},reFocus:function(){this.editor.focus()},toggleRecording:function(){this.recording?(this.stoprecord(),this.recording=!1):(this.recording=!0,this.startrecord())},startrecord:function(){var t=this;this.recording=!0,this.$root.recordUrl="",this.audioChunks=[],navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){t.mediaRecorder=new MediaRecorder(e),t.mediaRecorder.start(),t.startCounter(),t.audioChunks=[],t.mediaRecorder.addEventListener("dataavailable",(function(e){t.audioChunks.push(e.data)})),t.mediaRecorder.addEventListener("stop",(function(){t.audioBlob=new Blob(t.audioChunks),t.$root.recorderBlob=new Blob(t.audioChunks),t.$root.recordUrl=URL.createObjectURL(t.audioBlob)}))}))},startCounter:function(){var t=this;this.recorderInterval=null;var e=setInterval((function(){t.seconds++;var e="";t.seconds<10?e="0"+t.seconds:60==t.seconds?(t.seconds=0,t.minute++,e="00"):e=t.seconds,t.timer=t.minute+":"+e}),1e3);this.recorderInterval=e},stoprecord:function(t){var e=this;this.mediaRecorder.stop(),clearInterval(this.recorderInterval),this.recording=!1,this.seconds=0,this.minute=0,this.timer="0:00",setTimeout((function(){"send"==t&&e.sendRecord()}),1e3)},makeUUID:function(){return"id"+Math.random().toString(16).slice(2)},makeMessage:function(t,e,o,s){var i={content:null,created_at:moment().subtract(1,"hours"),is_reply:o,message_id:this.makeUUID(),id:this.makeUUID(),initialSize:200,index_count:this.$root.returnLastIndex()+1,replied_message:s,replied_message_id:null,showReply:!1,showDate:null,loading:!0,progressValue:0,space_id:this.$route.params.spaceId,tagged:!1,type:t,user_id:this.$root.user_temp_id,username:this.$root.username,video:{},audio:{},code:{},image:{},file:{}};return"image"==t&&(i.image=e),"video"==t&&(i.video=e),"audio"==t&&(i.audio=e),"code"==t&&(i.code=e),"file"==t&&(i.file=e),i},isTyping:function(){var t=this,e=window.Echo.join("global");setTimeout((function(){e.whisper("typing",{user:t.$root.username,typing:!0,spaceId:t.$route.params.spaceId})}),500)},sendRecord:function(){var t=new FormData;this.$root.NewMsg=this.makeMessage("audio",null,null,[]),this.attachment_type="voiceRecord",t.append("audio",this.$root.recorderBlob),t.append("display_name","Voice Record"),this.$root.Messages.push(this.$root.NewMsg),this.$root.spaceFullData.messages=this.$root.Messages,this.$root.LocalStore("full_"+this.$route.params.spaceId+this.$root.username,this.$root.spaceFullData),this.$root.scrollToBottom(),t.append("current_user",JSON.stringify(this.generateOnlineUsersList())),t.append("is_reply",this.$root.is_reply),t.append("attachment_type",this.attachment_type),t.append("space_id",this.$route.params.spaceId),t.append("temp_id",this.$root.NewMsg.message_id),t.append("device_id",this.$root.userDeviceId),this.$root.updateSpaceTracker(this.$root.selectedSpace.space_id,this.$root.NewMsg),this.$root.sendShareMessage(t)},generateOnlineUsersList:function(){var t=this,e=[];return this.$root.selectedSpaceMembers.forEach((function(o){var s=t.$root.globalUsers.filter((function(t){return t.id==o.user_id}));0!=s.length&&e.push(s[0])})),e},sendMessage:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(0!=this.input.length){this.input="",this.showSend=!1,this.$root.showRootReply=!1,t&&this.$refs.textBottom.$el.focus();var e=[];this.$root.is_reply?this.$root.NewMsg=this.makeMessage(null,e,"1",this.$root.replyMessage):this.$root.NewMsg=this.makeMessage(null,e,null,[]),this.$root.NewMsg.content=this.contentInWord,this.$root.Messages.push(this.$root.NewMsg),this.$root.spaceFullData.messages=this.$root.Messages,this.$root.LocalStore("full_"+this.$route.params.spaceId+this.$root.username,this.$root.spaceFullData),this.$root.scrollToBottom();var o={content:this.contentInWord,space_id:this.$route.params.spaceId,is_reply:this.$root.is_reply,current_user:JSON.stringify(this.generateOnlineUsersList()),replied_message_id:this.$root.replyMessage.message_id,attachment_type:null,temp_id:this.$root.NewMsg.message_id,device_id:this.$root.userDeviceId};this.$root.is_reply=!1,this.$root.updateSpaceTracker(this.$root.selectedSpace.space_id,this.$root.NewMsg),this.$root.sendTextMessage(o)}},focusEditor:function(){this.showAttachment=!1,this.$root.showEmojiBox=!1},blurEditor:function(){this.showAttachment=!0}}},a=(o(645),o(4)),c=Object(a.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"row px-md-3 py-0"},[o("div",{staticClass:"col-12 py-1 my-0 d-flex px-md-2 px-2 flex-row",staticStyle:{"align-items":"center","justify-content":"center"}},[t.recording?[o("div",{staticClass:"ml-auto d-flex flex-row",staticStyle:{"align-items":"center","justify-content":"center"}},[o("v-btn",{staticClass:"bg-danger",attrs:{icon:""},on:{click:function(e){return t.stoprecord("cancle")}}},[o("v-icon",{attrs:{color:"#ffffff"}},[t._v("mdi-close")])],1),t._v(" "),o("div",{staticClass:"mx-3 ",staticStyle:{"font-size":"14px",color:"gray","font-family":"BodyFont"}},[t._v(t._s(t.timer))]),t._v(" "),o("v-btn",{staticClass:"bg-success",attrs:{icon:""},on:{click:function(e){return t.stoprecord("send")}}},[o("v-icon",{attrs:{color:"#ffffff"}},[t._v("mdi-check")])],1),t._v(" "),o("v-btn",{staticClass:"mx-1",attrs:{icon:""}},[o("v-icon",[t._v("las la-microphone")])],1)],1)]:[t.showAttachment&&"Bot"!=this.$root.selectedSpace.type?o("v-btn",{staticClass:"mx-md-1",attrs:{icon:""},on:{click:t.showShareBoard}},[o("v-icon",[t._v("las la-paperclip")])],1):t._e(),t._v(" "),o("v-btn",{staticClass:"mx-md-1 mr-1",attrs:{icon:""},on:{click:t.toggleEmoji}},[o("v-icon",[t._v("las la-grin")])],1),t._v(" "),o("textarea-autosize",{ref:"textBottom",class:"large"==t.screenType?"textareaLg":"textareaSm",attrs:{placeholder:"Type here...","min-height":"large"==t.screenType?50:20,"max-height":"large"==t.screenType?80:60},on:{input:t.update},nativeOn:{keydown:function(e){return t.handelkeyAct(e)},focus:function(e){return t.focusEditor(e)},blur:function(e){return t.blurEditor(e)}},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),"Bot"!=this.$root.selectedSpace.type?[t.showSend?o("v-btn",{staticClass:"mx-md-1",attrs:{icon:""},on:{click:t.sendMessage}},[o("v-icon",[t._v("las la-send")])],1):o("v-btn",{staticClass:"mx-md-1",attrs:{icon:""},on:{click:t.startrecord}},[o("v-icon",[t._v("las la-microphone")])],1)]:[o("v-btn",{staticClass:"mx-md-1",attrs:{icon:""},on:{click:t.sendMessage}},[o("v-icon",[t._v("las la-send")])],1)]]],2)])}),[],!1,null,"565fc84d",null);e.default=c.exports}}]);