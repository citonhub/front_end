(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{288:function(t,e){},644:function(t,e,s){"use strict";s.r(e);var o=s(287).htmlToText,n={data:function(){return{showDelete:!1,showCopy:!1,contentValue:""}},components:{},mounted:function(){this.setOptions()},methods:{setOptions:function(){var t=this.$root.replyMessage;null!=t.type&&"text"!=t.type&&"action"!=t.type&&"code"!=t.type||(this.showCopy=!0),this.checkOwner(t.user_id)&&(this.showDelete=!0);var e="";null!=t.type&&"text"!=t.type&&"action"!=t.type||(e=o(t.content,{wordwrap:1e6}),this.contentValue=e),"code"==t.type&&(this.contentValue=t.code.content)},replyMessage:function(){this.$root.chatComponent.showMoreOptions=!1,this.$root.showRootReply=!0,this.$root.is_reply=!0,this.$root.bottomEditorValue.focus()},sendDeleteRequest:function(t){axios.post("/delete-message",{message_id:t}).then((function(t){t.status})).catch((function(t){}))},deleteMessage:function(){var t=this,e=this.$root.replyMessage;this.$root.getLocalStore("full_"+e.space_id+this.$root.username).then((function(s){if(null!=s){var o=JSON.parse(s),n=t.$root.Messages.filter((function(t){return t.message_id!=e.message_id}));o.messages=n,t.$root.Messages=t.$root.handleResults(n),t.$root.LocalStore("full_"+e.space_id+t.$root.username,o)}})),this.$root.getLocalStore("user_chat_list"+this.$root.username).then((function(s){if(null!=s){var o=JSON.parse(s);o.channels.map((function(t){t.space_id==e.space_id&&t.last_message[0].index_count==e.index_count&&(t.last_message[0].deleted=!0)})),o.direct_messages.map((function(t){t.space_id==e.space_id&&t.last_message[0].index_count==e.index_count&&(t.last_message[0].deleted=!0)})),o.pet_spaces.map((function(t){t.space_id==e.space_id&&t.last_message[0].index_count==e.index_count&&(t.last_message[0].deleted=!0)})),t.$root.LocalStore("user_chat_list"+t.$root.username,o);var n=o.channels.concat(o.direct_messages,o.pet_spaces);t.$root.ChatList=n,t.$root.sortChatList()}})),this.sendDeleteRequest(e.message_id)},checkOwner:function(t){return this.$root.user_temp_id==t},copyMessage:function(){var t,e;t=this.contentValue,(e=document.createElement("textarea")).value=t,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),this.$root.chatComponent.showAlert("Copied!","Copied to clipboard","success")}}},a=s(4),i=Object(a.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"py-0 px-0",staticStyle:{width:"200px"}},[s("div",{staticClass:"col-12 px-0 py-1 d-flex flex-column"},[s("v-card",{staticClass:"px-2 py-2 d-flex flex-row",staticStyle:{"align-items":"center"},attrs:{tile:"",flat:""},on:{click:function(e){return t.replyMessage()}}},[s("v-icon",{staticClass:"mr-1"},[t._v("las la-reply")]),t._v(" "),s("span",{staticStyle:{"font-family":"BodyFont","font-size":"13px",color:"grey"}},[t._v("Reply")])],1),t._v(" "),t.showCopy?s("v-card",{staticClass:"px-2 py-2 d-flex flex-row",staticStyle:{"align-items":"center"},attrs:{tile:"",flat:""},on:{click:function(e){return t.copyMessage()}}},[s("v-icon",{staticClass:"mr-1"},[t._v("las la-copy")]),t._v(" "),s("span",{staticStyle:{"font-family":"BodyFont","font-size":"13px",color:"grey"}},[t._v("Copy")])],1):t._e(),t._v(" "),t.showDelete?s("v-card",{staticClass:"px-2 py-2 d-flex flex-row",staticStyle:{"align-items":"center"},attrs:{tile:"",flat:""},on:{click:function(e){return t.deleteMessage()}}},[s("v-icon",{staticClass:"mr-1"},[t._v("las la-trash")]),t._v(" "),s("span",{staticStyle:{"font-family":"BodyFont","font-size":"13px",color:"grey"}},[t._v("Delete")])],1):t._e()],1),t._v(" "),s("textarea",{staticClass:"contentContainer",staticStyle:{display:"none"},domProps:{value:t.contentValue}})])}),[],!1,null,null,null);e.default=i.exports}}]);