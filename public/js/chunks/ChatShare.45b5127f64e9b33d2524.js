(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{675:function(t,e,i){"use strict";i.r(e);var a=i(243),o=i.n(a),s=(i(242),{data:function(){return{imagepath:"",Alert:!1,alertMsg:"",image1:this.$root.imagepath1,image2:this.$root.imagepath2,image3:this.$root.imagepath3,image4:this.$root.imagepath4,imageHeight1:this.$root.imageHeight1,imageHeight2:this.$root.imageHeight2,imageHeight3:this.$root.imageHeight3,imageHeight4:this.$root.imageHeight4,imageWidth1:this.$root.imageWidth1,imageWidth2:this.$root.imageWidth2,imageWidth3:this.$root.imageWidth3,imageWidth4:this.$root.imageWidth4,videoUrl:"",VideoBackground:"#c5c5c5",VideoImgBackground:"",CodeFileName:"index",codeContent:this.$root.codeContent,codeLanguage:this.$root.codeLanguage,FileBlob:"",viewerType:"postViewer",postContent:"",wordLimit:200,wordCount:0,mycontent:"",contentInWord:"",editFeild:!1,loading:!1,is_comment:!1,attachment_type:null,imageTemp1:this.$root.imageTemp1,imageTemp2:this.$root.imageTemp2,imageTemp3:this.$root.imageTemp3,imageTemp4:this.$root.imageTemp4,VideoBlob:"",AudioBlob:"",audioUrl:"",progressvalue:0,fileUrl:"",projectArray:[],documentSize:"",VideoName:"",documentName:"",audioName:"",audioSize:"",loadingProjects:!1,showShareProject:!1,selectedProject:""}},components:{},mounted:function(){this.$root.componentIsLoading=!1,this.getAllProjects()},methods:{goBack:function(){window.history.length>1?this.$router.go(-1):this.$router.push("/"),this.$root.chatComponent.chatShareIsOpen=!1},getAllProjects:function(){var t=this;this.loadingProjects=!0,axios.get("/fetch-personal-projects").then((function(e){200==e.status&&(t.loadingProjects=!1,t.projectArray=e.data.projects)})).catch((function(t){}))},clearData:function(){this.image1="",this.image2="",this.image3="",this.image4="",this.videoUrl="",this.audioUrl="",this.fileUrl="",this.codeContent="",this.showShareProject=!1},codeEditor:function(){this.image1="",this.image2="",this.image3="",this.image4="",this.videoUrl="",this.$router.push({path:"/code-editor"})},bytesToSize:function(t){if(0==t)return"0 Byte";var e=parseInt(Math.floor(Math.log(t)/Math.log(1024)));return Math.round(t/Math.pow(1024,e),2)+" "+["Bytes","KB","MB","GB","TB"][e]},audiohandler:function(t){var e=this;this.clearData();var i=t.target.files;this.AudioBlob=i[0];var a=new FileReader;a.readAsDataURL(i[0]);var o=i[0].size;this.audioName=i[0].name,this.audioSize=this.bytesToSize(i[0].size),o<=4e6?(a.addEventListener("load",(function(){e.audioUrl=a.result})),setTimeout((function(){e.sendMessage()}),1e3)):this.showAlert("Oops!","Audio size cannot be more than 40MB","error")},filehandler:function(t){var e=this;this.clearData();var i=t.target.files;this.FileBlob=i[0];var a=new FileReader;a.readAsDataURL(i[0]);var o=i[0].size;this.documentSize=this.bytesToSize(i[0].size),this.documentName=i[0].name,o<=4e8?a.addEventListener("load",(function(){e.fileUrl=a.result,e.sendMessage()})):this.showAlert("Oops!","File size cannot be more than 400MB","error")},showAlert:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;"info"==i&&o.a.info({title:t,message:e,zindex:"9999999999",position:"bottomRight",transitionInMobile:"fadeIn",transitionOutMobile:"fadeOut"}),"success"==i&&o.a.success({title:t,message:e,zindex:"9999999999",position:"bottomRight",transitionInMobile:"fadeIn",transitionOutMobile:"fadeOut"}),"warning"==i&&o.a.warning({title:t,message:e,zindex:"9999999999",position:"bottomRight",transitionInMobile:"fadeIn",transitionOutMobile:"fadeOut"}),"error"==i&&o.a.error({title:t,message:e,zindex:"9999999999",position:"bottomRight",transitionInMobile:"fadeIn",transitionOutMobile:"fadeOut"})},selectProjectBtn:function(){this.clearData(),this.showShareProject=!0},b64toBlob:function(t,e,i){e=e||"",i=i||512;for(var a=atob(t),o=[],s=0;s<a.length;s+=i){for(var r=a.slice(s,s+i),n=new Array(r.length),h=0;h<r.length;h++)n[h]=r.charCodeAt(h);var d=new Uint8Array(n);o.push(d)}return new Blob(o,{type:e})},handleBlob:function(t){var e=t.split(";"),i=e[0].split(":")[1],a=i.slice(6),o=e[1].split(",")[1];return[this.b64toBlob(o,i),a]},makeUUID:function(){return"id"+Math.random().toString(16).slice(2)},makeMessage:function(t,e){var i={content:null,created_at:moment().subtract(1,"hours"),is_reply:"false",message_id:this.makeUUID(),id:this.makeUUID(),replied_message:[],index_count:this.$root.returnLastIndex()+1,replied_message_id:null,showReply:!1,showDate:null,loading:!0,progressValue:0,space_id:this.$root.selectedSpace.space_id,tagged:!1,type:t,user_id:this.$root.user_temp_id,username:this.$root.username,video:{},audio:{},code:{},image:{},file:{}};return"image"==t&&(i.image=e),"video"==t&&(i.video=e),"audio"==t&&(i.audio=e),"code"==t&&(i.code=e),"file"==t&&(i.file=e),i},ChangeDataToDefaults:function(){this.$root.imagepath1="",this.$root.imagepath2="",this.$root.imagepath3="",this.$root.imagepath4="",this.$root.codeContent="",this.contentInWord="",this.$root.postContent="",this.showShareProject=!1},sendMessage:function(){var t=this;this.loading=!0;var e=new FormData;if(""!=this.image1||""!=this.image2||""!=this.image3||""!=this.image4){if(this.$root.NewMsg=this.makeMessage("image",null),this.attachment_type="image",""!=this.image1)if(""==this.$root.imageCanvas1)e.append("image1",this.imageTemp1);else{var i=this.handleBlob(this.image1);e.append("image1",i[0]),e.append("imageType1",i[1])}if(""!=this.image2)if(""==this.$root.imageCanvas2)e.append("image2",this.imageTemp2);else{var a=this.handleBlob(this.image2);e.append("image2",a[0]),e.append("imageType2",a[1])}if(""!=this.image3)if(""==this.$root.imageCanvas3)e.append("image3",this.imageTemp3);else{var o=this.handleBlob(this.image3);e.append("image3",o[0]),e.append("imageType3",o[1])}if(""!=this.image4)if(""==this.$root.imageCanvas4)e.append("image4",this.imageTemp4);else{var s=this.handleBlob(this.image4);e.append("image4",s[0]),e.append("imageType4",s[1])}e.append("imageHeight1",this.imageHeight1),e.append("imageHeight2",this.imageHeight2),e.append("imageHeight3",this.imageHeight3),e.append("imageHeight4",this.imageHeight4),e.append("imageWidth1",this.imageWidth1),e.append("imageWidth2",this.imageWidth2),e.append("imageWidth3",this.imageWidth3),e.append("imageWidth4",this.imageWidth4)}if(""!=this.videoUrl){this.$root.NewMsg=this.makeMessage("video",null),this.attachment_type="video",e.append("video",this.VideoBlob),e.append("display_name",this.VideoName)}if(""!=this.audioUrl){this.$root.NewMsg=this.makeMessage("audio",null),this.attachment_type="audio",e.append("audio",this.AudioBlob),e.append("display_name",this.audioName)}if(""!=this.fileUrl){this.$root.NewMsg=this.makeMessage("file",null),this.attachment_type="file",e.append("file",this.FileBlob),e.append("display_name",this.documentName),e.append("file_size",this.documentSize)}if(1==this.showShareProject){this.$root.NewMsg=this.makeMessage("project",null);var r=this.projectArray.filter((function(e){return e.project_slug==t.selectedProject}));this.$root.NewMsg.project=r[0],e.append("project_data",this.selectedProject),this.attachment_type="project"}this.$root.Messages.push(this.$root.NewMsg),this.$root.spaceFullData.messages=this.$root.Messages,this.$root.LocalStore("full_space_"+this.$root.selectedSpace.space_id+this.$root.username,this.$root.spaceFullData),this.$root.scrollToBottom(),e.append("current_user",JSON.stringify(this.generateOnlineUsersList())),e.append("is_reply",this.$root.is_reply),e.append("attachment_type",this.attachment_type),e.append("space_id",this.$root.selectedSpace.space_id),e.append("temp_id",this.$root.NewMsg.message_id),e.append("device_id",this.$root.userDeviceId),this.ChangeDataToDefaults(),this.$root.updateSpaceTracker(this.$root.selectedSpace.space_id,this.$root.NewMsg),this.$root.sendShareMessage(e),this.goBack()},generateOnlineUsersList:function(){var t=this,e=[];return this.$root.selectedSpaceMembers.forEach((function(i){var a=t.$root.globalUsers.filter((function(t){return t.id==i.user_id}));0!=a.length&&e.push(a[0])})),e},crophandler:function(t){var e=this;this.clearData(),this.videoUrl="",this.codeContent="";var i=t.target.files.length;if(i>4)this.showAlert("Oops!","Selected images cannot be more than 4","error");else if(i<=4){var a=t.target.files;this.imageTemp1=a[0],this.imageTemp2=a[1],this.imageTemp3=a[2],this.imageTemp4=a[3],this.$root.imageTemp1=a[0],this.$root.imageTemp2=a[1],this.$root.imageTemp3=a[2],this.$root.imageTemp4=a[3];var o=new FileReader;if(o.readAsDataURL(a[0]),o.addEventListener("load",(function(){e.image1=o.result})),a[1]){var s=new FileReader;s.readAsDataURL(a[1]),s.addEventListener("load",(function(){e.image2=s.result}))}if(a[2]){var r=new FileReader;r.readAsDataURL(a[2]),r.addEventListener("load",(function(){e.image3=r.result}))}if(a[3]){var n=new FileReader;n.readAsDataURL(a[3]),n.addEventListener("load",(function(){e.image4=n.result}))}}},editImage:function(t){"image1"==t&&(this.$root.imagepath1=this.image1,this.$root.imagepath2=this.image2,this.$root.imagepath3=this.image3,this.$root.imagepath4=this.image4,this.$root.currentImage="image1"),"image2"==t&&(this.$root.imagepath1=this.image1,this.$root.imagepath2=this.image2,this.$root.imagepath3=this.image3,this.$root.imagepath4=this.image4,this.$root.currentImage="image2"),"image3"==t&&(this.$root.imagepath1=this.image1,this.$root.imagepath2=this.image2,this.$root.imagepath3=this.image3,this.$root.imagepath4=this.image4,this.$root.currentImage="image3"),"image4"==t&&(this.$root.imagepath1=this.image1,this.$root.imagepath2=this.image2,this.$root.imagepath3=this.image3,this.$root.imagepath4=this.image4,this.$root.currentImage="image4"),this.$router.push({path:"/channels/"+this.$root.selectedSpace.space_id+"/crop-image"})},vidoehandler:function(t){var e=this;this.clearData();var i=t.target.files;this.VideoBlob=i[0];var a=new FileReader;a.readAsDataURL(i[0]);var o=i[0].size;this.VideoName=i[0].name,o<=1e8?a.addEventListener("load",(function(){e.videoUrl=a.result,e.sendMessage()})):this.showAlert("Oops!","Video size cannot be more than 100MB","error")}}}),r=i(4),n=Object(r.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"font-family":"BodyFont"}},[i("v-btn",{staticClass:"d-inline-block  ",staticStyle:{position:"absolute",background:"#3C87CD",top:"2%",right:"2%","z-index":"990679797879"},attrs:{icon:"",color:"#ffffff"},on:{click:t.goBack}},[i("v-icon",[t._v("mdi-close mdi-18px")])],1),t._v(" "),i("div",{staticClass:"d-flex flex-wrap mb-2 mt-4 pt-3",staticStyle:{"align-items":"center","justify-content":"center"}},[i("v-card",{staticClass:"px-1 py-1 mx-1",staticStyle:{"border-radius":"10px"}},[i("v-btn",{attrs:{title:"Share images",icon:""}},[i("v-icon",{staticStyle:{"font-size":"26px"}},[t._v("las la-image")]),t._v(" "),i("input",{staticStyle:{opacity:"0",width:"100%",height:"100%",overflow:"hidden",position:"absolute","z-index":"10"},attrs:{type:"file",multiple:"",accept:"image/x-png,image/jpeg,image/jpg"},on:{change:t.crophandler}})],1)],1),t._v(" "),i("v-card",{staticClass:"px-1 py-1 mx-1",staticStyle:{"border-radius":"10px"}},[i("v-btn",{attrs:{title:"Share a video",icon:""}},[i("v-icon",{staticStyle:{"font-size":"26px"}},[t._v("las la-video")]),t._v(" "),i("input",{staticStyle:{opacity:"0",width:"100%",height:"100%",left:"0",overflow:"hidden",position:"absolute","z-index":"10"},attrs:{type:"file",accept:"video/mp4,video/x-m4v,video/*"},on:{change:t.vidoehandler}})],1)],1),t._v(" "),i("v-card",{staticClass:"px-1 py-1 mx-1",staticStyle:{"border-radius":"10px"}},[i("v-btn",{attrs:{icon:"",title:"Share an audio"}},[i("v-icon",{staticStyle:{"font-size":"26px"}},[t._v("las la-music")]),t._v(" "),i("input",{staticStyle:{opacity:"0",width:"100%",height:"100%",left:"0",overflow:"hidden",position:"absolute","z-index":"10"},attrs:{type:"file",accept:"audio/*"},on:{change:t.audiohandler}})],1)],1),t._v(" "),i("v-card",{staticClass:"px-1 py-1 mx-1",staticStyle:{"border-radius":"10px"}},[i("v-btn",{attrs:{icon:"",title:"Share a file"}},[i("v-icon",{staticStyle:{"font-size":"26px"}},[t._v("las la-file-alt")]),t._v(" "),i("input",{staticStyle:{opacity:"0",width:"100%",height:"100%",overflow:"hidden",position:"absolute","z-index":"10"},attrs:{type:"file"},on:{change:t.filehandler}})],1)],1),t._v(" "),i("v-card",{staticClass:"px-1 py-1 mx-1",staticStyle:{"border-radius":"10px"},on:{click:t.selectProjectBtn}},[i("v-btn",{attrs:{icon:"",title:"Share a project"}},[i("v-icon",{staticStyle:{"font-size":"26px"}},[t._v("las la-laptop-code")])],1)],1)],1),t._v(" "),i("div",[i("div",{staticClass:"col-lg-8 offset-lg-2 col-md-10 offset-md-1 d-flex flex-row flex-wrap px-1 px-md-2",staticStyle:{"align-items":"center"}},[""!=t.image1?i("div",{staticClass:"col-6 d-flex py-2 px-2",staticStyle:{"align-items":"center","justify-content":"center"}},[i("div",{style:"border:2px solid #3C87CD; border-radius:10px; height:170px; background-image:url("+t.image1+");width:100%; background-size:cover;",on:{click:function(e){return t.editImage("image1")}}},[i("div",{staticStyle:{position:"absolute",height:"auto",width:"auto",right:"10%",top:"10%",background:"rgba(38, 82, 89,0.6)","border-radius":"50%",padding:"0px"}},[i("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.image1=""}}},[i("v-icon",{attrs:{color:"#ffffff"}},[t._v("mdi-close mdi-18px")])],1)],1)])]):t._e(),t._v(" "),""!=t.image2?i("div",{staticClass:"col-6 d-flex py-2 px-2",staticStyle:{"align-items":"center","justify-content":"center"}},[i("div",{style:"border:2px solid #3C87CD; border-radius:10px; height:170px; background-image:url("+t.image2+");width:100%; background-size:cover;",on:{click:function(e){return t.editImage("image2")}}},[i("div",{staticStyle:{position:"absolute",height:"auto",width:"auto",right:"10%",top:"10%",background:"rgba(38, 82, 89,0.6)","border-radius":"50%",padding:"0px"}},[i("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.image2=""}}},[i("v-icon",{attrs:{color:"#ffffff"}},[t._v("mdi-close mdi-18px")])],1)],1)])]):t._e(),t._v(" "),""!=t.image3?i("div",{staticClass:"col-6 d-flex py-2 px-2",staticStyle:{"align-items":"center","justify-content":"center"}},[i("div",{style:"border:2px solid #3C87CD; border-radius:10px; height:170px; background-image:url("+t.image3+");width:100%; background-size:cover;",on:{click:function(e){return t.editImage("image3")}}},[i("div",{staticStyle:{position:"absolute",height:"auto",width:"auto",right:"10%",top:"10%",background:"rgba(38, 82, 89,0.6)","border-radius":"50%",padding:"0px"}},[i("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.image3=""}}},[i("v-icon",{attrs:{color:"#ffffff"}},[t._v("mdi-close mdi-18px")])],1)],1)])]):t._e(),t._v(" "),""!=t.image4?i("div",{staticClass:"col-6 d-flex py-2 px-2",staticStyle:{"align-items":"center","justify-content":"center"}},[i("div",{style:"border:2px solid #3C87CD; border-radius:10px; height:170px; background-image:url("+t.image4+");width:100%; background-size:cover;",on:{click:function(e){return t.editImage("image4")}}},[i("div",{staticStyle:{position:"absolute",height:"auto",width:"auto",right:"10%",top:"10%",background:"rgba(38, 82, 89,0.6)","border-radius":"50%",padding:"0px"}},[i("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.image4=""}}},[i("v-icon",{attrs:{color:"#ffffff"}},[t._v("mdi-close mdi-18px")])],1)],1)])]):t._e(),t._v(" "),""!=t.image1||""!=t.image2||""!=t.image3||""!=t.image4?i("div",{staticClass:"col-12 text-center"},[i("v-btn",{staticStyle:{"font-size":"12px","font-weight":"bolder",color:"white","font-family":"MediumFont"},attrs:{small:"",rounded:"",color:"#ffffff"},on:{click:t.sendMessage}},[i("span",{staticStyle:{color:"#3C87CD","text-transform":"none"}},[t._v("Send")])])],1):t._e()]),t._v(" "),t.showShareProject?[i("div",{staticClass:"px-2"},[i("div",{staticClass:"col-lg-8 offset-lg-2 col-md-10 offset-md-1 d-flex flex-row flex-wrap px-1 px-md-2",staticStyle:{"align-items":"center",background:"white"}},[t._m(0),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedProject,expression:"selectedProject"}],staticClass:"browser-default custom-select",staticStyle:{"font-size":"13px !important"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedProject=e.target.multiple?i:i[0]}}},t._l(t.projectArray,(function(e,a){return i("option",{key:a,domProps:{value:e.project_slug}},[t._v(t._s(e.title))])})),0)]),t._v(" "),t.selectedProject?i("div",{staticClass:"col-12 text-center"},[i("v-btn",{staticStyle:{"font-size":"12px","font-weight":"bolder",color:"white","font-family":"MediumFont"},attrs:{small:"",rounded:"",color:"#ffffff"},on:{click:t.sendMessage}},[i("span",{staticStyle:{color:"#3C87CD","text-transform":"none"}},[t._v("Send")])])],1):t._e()])]:t._e()],2)],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticStyle:{"font-size":"13px","font-family":"BodyFont:"}},[this._v("Select a project")])])}],!1,null,"1bb27919",null);e.default=n.exports}}]);